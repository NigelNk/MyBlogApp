{% extends 'base.html' %}

{% load static %}

{% block title %}
    Articles
{% endblock %}

{% block content %}
    <style>
        .article-card {
            border-radius: 10px;
        }

        .article-card .card-header {
            border-bottom: 1px solid #eee;
        }

        .read-more-link {
            font-weight: 500;
            text-decoration: none;
            color: #0d6efd;
        }

        .read-more-link:hover {
            text-decoration: underline;
        }

        .read-more-link .arrow {
            transition: transform 0.2s ease;
            display: inline-block;
        }

        .read-more-link:hover .arrow {
            transform: translateX(4px);
        }

        .article-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }


    </style>
    {% include 'pages/header/header.html' %}
    <div class="container my-2">

        {% for article in articles %}
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10 col-sm-12">
                    <div class="card shadow-sm mb-4 article-card">

                        <!-- Header -->
                        <div class="card-header bg-white d-flex align-items-center">
                            <img src="{{ article.author.profile.image_url.url|default:'https://via.placeholder.com/40' }}"
                                 class="rounded-circle me-3"
                                 width="50"
                                 height="50"
                                 alt="Author">
                            <div>
                                <h6 class="mb-0 fw-semibold">
                                    {{ article.author.profile.get_full_name|default:article.author.username }}
                                </h6>
                                <small class="text-muted">
                                    {{ article.author.profile.short_bio }}
                                </small>
                                <br />
                                <small class="text-muted">
                                    {{ article.created_at|date:"M d, Y" }} · {{ article.category|title }}
                                </small>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="card-body">
                            <h5 class="card-title fw-bold">
                                {{ article.title }}
                            </h5>

                            <p class="card-text text-muted">
                                {{ article.content|striptags|truncatewords:50 }}
                            </p>

                            {% if article.image %}
                                <img src="{{ article.image.url }}"
                                     class="img-fluid article-image mt-2"
                                     alt="{{ article.title }}">
                            {% endif %}
                        </div>

                        <!-- Footer -->
                        <div class="card-footer bg-white border-0">
                            <a href="#" class="read-more-link">
                                Read more <span class="arrow">→</span>
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        {% endfor %}

    </div>

{% endblock %}